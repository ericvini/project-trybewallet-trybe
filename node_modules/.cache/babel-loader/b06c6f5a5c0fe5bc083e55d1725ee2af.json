{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst fsScandir = require(\"@nodelib/fs.scandir\");\n\nconst common = require(\"./common\");\n\nconst reader_1 = require(\"./reader\");\n\nclass SyncReader extends reader_1.default {\n  constructor() {\n    super(...arguments);\n    this._scandir = fsScandir.scandirSync;\n    this._storage = new Set();\n    this._queue = new Set();\n  }\n\n  read() {\n    this._pushToQueue(this._root, this._settings.basePath);\n\n    this._handleQueue();\n\n    return [...this._storage];\n  }\n\n  _pushToQueue(directory, base) {\n    this._queue.add({\n      directory,\n      base\n    });\n  }\n\n  _handleQueue() {\n    for (const item of this._queue.values()) {\n      this._handleDirectory(item.directory, item.base);\n    }\n  }\n\n  _handleDirectory(directory, base) {\n    try {\n      const entries = this._scandir(directory, this._settings.fsScandirSettings);\n\n      for (const entry of entries) {\n        this._handleEntry(entry, base);\n      }\n    } catch (error) {\n      this._handleError(error);\n    }\n  }\n\n  _handleError(error) {\n    if (!common.isFatalError(this._settings, error)) {\n      return;\n    }\n\n    throw error;\n  }\n\n  _handleEntry(entry, base) {\n    const fullpath = entry.path;\n\n    if (base !== undefined) {\n      entry.path = common.joinPathSegments(base, entry.name, this._settings.pathSegmentSeparator);\n    }\n\n    if (common.isAppliedFilter(this._settings.entryFilter, entry)) {\n      this._pushToStorage(entry);\n    }\n\n    if (entry.dirent.isDirectory() && common.isAppliedFilter(this._settings.deepFilter, entry)) {\n      this._pushToQueue(fullpath, entry.path);\n    }\n  }\n\n  _pushToStorage(entry) {\n    this._storage.add(entry);\n  }\n\n}\n\nexports.default = SyncReader;","map":{"version":3,"sources":["/home/eric/sd-07-project-trybewallet/node_modules/@nodelib/fs.walk/out/readers/sync.js"],"names":["Object","defineProperty","exports","value","fsScandir","require","common","reader_1","SyncReader","default","constructor","arguments","_scandir","scandirSync","_storage","Set","_queue","read","_pushToQueue","_root","_settings","basePath","_handleQueue","directory","base","add","item","values","_handleDirectory","entries","fsScandirSettings","entry","_handleEntry","error","_handleError","isFatalError","fullpath","path","undefined","joinPathSegments","name","pathSegmentSeparator","isAppliedFilter","entryFilter","_pushToStorage","dirent","isDirectory","deepFilter"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AACA,MAAMC,SAAS,GAAGC,OAAO,CAAC,qBAAD,CAAzB;;AACA,MAAMC,MAAM,GAAGD,OAAO,CAAC,UAAD,CAAtB;;AACA,MAAME,QAAQ,GAAGF,OAAO,CAAC,UAAD,CAAxB;;AACA,MAAMG,UAAN,SAAyBD,QAAQ,CAACE,OAAlC,CAA0C;AACtCC,EAAAA,WAAW,GAAG;AACV,UAAM,GAAGC,SAAT;AACA,SAAKC,QAAL,GAAgBR,SAAS,CAACS,WAA1B;AACA,SAAKC,QAAL,GAAgB,IAAIC,GAAJ,EAAhB;AACA,SAAKC,MAAL,GAAc,IAAID,GAAJ,EAAd;AACH;;AACDE,EAAAA,IAAI,GAAG;AACH,SAAKC,YAAL,CAAkB,KAAKC,KAAvB,EAA8B,KAAKC,SAAL,CAAeC,QAA7C;;AACA,SAAKC,YAAL;;AACA,WAAO,CAAC,GAAG,KAAKR,QAAT,CAAP;AACH;;AACDI,EAAAA,YAAY,CAACK,SAAD,EAAYC,IAAZ,EAAkB;AAC1B,SAAKR,MAAL,CAAYS,GAAZ,CAAgB;AAAEF,MAAAA,SAAF;AAAaC,MAAAA;AAAb,KAAhB;AACH;;AACDF,EAAAA,YAAY,GAAG;AACX,SAAK,MAAMI,IAAX,IAAmB,KAAKV,MAAL,CAAYW,MAAZ,EAAnB,EAAyC;AACrC,WAAKC,gBAAL,CAAsBF,IAAI,CAACH,SAA3B,EAAsCG,IAAI,CAACF,IAA3C;AACH;AACJ;;AACDI,EAAAA,gBAAgB,CAACL,SAAD,EAAYC,IAAZ,EAAkB;AAC9B,QAAI;AACA,YAAMK,OAAO,GAAG,KAAKjB,QAAL,CAAcW,SAAd,EAAyB,KAAKH,SAAL,CAAeU,iBAAxC,CAAhB;;AACA,WAAK,MAAMC,KAAX,IAAoBF,OAApB,EAA6B;AACzB,aAAKG,YAAL,CAAkBD,KAAlB,EAAyBP,IAAzB;AACH;AACJ,KALD,CAMA,OAAOS,KAAP,EAAc;AACV,WAAKC,YAAL,CAAkBD,KAAlB;AACH;AACJ;;AACDC,EAAAA,YAAY,CAACD,KAAD,EAAQ;AAChB,QAAI,CAAC3B,MAAM,CAAC6B,YAAP,CAAoB,KAAKf,SAAzB,EAAoCa,KAApC,CAAL,EAAiD;AAC7C;AACH;;AACD,UAAMA,KAAN;AACH;;AACDD,EAAAA,YAAY,CAACD,KAAD,EAAQP,IAAR,EAAc;AACtB,UAAMY,QAAQ,GAAGL,KAAK,CAACM,IAAvB;;AACA,QAAIb,IAAI,KAAKc,SAAb,EAAwB;AACpBP,MAAAA,KAAK,CAACM,IAAN,GAAa/B,MAAM,CAACiC,gBAAP,CAAwBf,IAAxB,EAA8BO,KAAK,CAACS,IAApC,EAA0C,KAAKpB,SAAL,CAAeqB,oBAAzD,CAAb;AACH;;AACD,QAAInC,MAAM,CAACoC,eAAP,CAAuB,KAAKtB,SAAL,CAAeuB,WAAtC,EAAmDZ,KAAnD,CAAJ,EAA+D;AAC3D,WAAKa,cAAL,CAAoBb,KAApB;AACH;;AACD,QAAIA,KAAK,CAACc,MAAN,CAAaC,WAAb,MAA8BxC,MAAM,CAACoC,eAAP,CAAuB,KAAKtB,SAAL,CAAe2B,UAAtC,EAAkDhB,KAAlD,CAAlC,EAA4F;AACxF,WAAKb,YAAL,CAAkBkB,QAAlB,EAA4BL,KAAK,CAACM,IAAlC;AACH;AACJ;;AACDO,EAAAA,cAAc,CAACb,KAAD,EAAQ;AAClB,SAAKjB,QAAL,CAAcW,GAAd,CAAkBM,KAAlB;AACH;;AAnDqC;;AAqD1C7B,OAAO,CAACO,OAAR,GAAkBD,UAAlB","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst fsScandir = require(\"@nodelib/fs.scandir\");\r\nconst common = require(\"./common\");\r\nconst reader_1 = require(\"./reader\");\r\nclass SyncReader extends reader_1.default {\r\n    constructor() {\r\n        super(...arguments);\r\n        this._scandir = fsScandir.scandirSync;\r\n        this._storage = new Set();\r\n        this._queue = new Set();\r\n    }\r\n    read() {\r\n        this._pushToQueue(this._root, this._settings.basePath);\r\n        this._handleQueue();\r\n        return [...this._storage];\r\n    }\r\n    _pushToQueue(directory, base) {\r\n        this._queue.add({ directory, base });\r\n    }\r\n    _handleQueue() {\r\n        for (const item of this._queue.values()) {\r\n            this._handleDirectory(item.directory, item.base);\r\n        }\r\n    }\r\n    _handleDirectory(directory, base) {\r\n        try {\r\n            const entries = this._scandir(directory, this._settings.fsScandirSettings);\r\n            for (const entry of entries) {\r\n                this._handleEntry(entry, base);\r\n            }\r\n        }\r\n        catch (error) {\r\n            this._handleError(error);\r\n        }\r\n    }\r\n    _handleError(error) {\r\n        if (!common.isFatalError(this._settings, error)) {\r\n            return;\r\n        }\r\n        throw error;\r\n    }\r\n    _handleEntry(entry, base) {\r\n        const fullpath = entry.path;\r\n        if (base !== undefined) {\r\n            entry.path = common.joinPathSegments(base, entry.name, this._settings.pathSegmentSeparator);\r\n        }\r\n        if (common.isAppliedFilter(this._settings.entryFilter, entry)) {\r\n            this._pushToStorage(entry);\r\n        }\r\n        if (entry.dirent.isDirectory() && common.isAppliedFilter(this._settings.deepFilter, entry)) {\r\n            this._pushToQueue(fullpath, entry.path);\r\n        }\r\n    }\r\n    _pushToStorage(entry) {\r\n        this._storage.add(entry);\r\n    }\r\n}\r\nexports.default = SyncReader;\r\n"]},"metadata":{},"sourceType":"script"}